==================== Changes in man-pages-4.03 ====================

Released: 2015-12-05, Munich


Contributors
------------

The following people contributed patches/fixes or (noted in brackets
in the changelog below) reports, notes, and ideas that have been
incorporated in changes in this release:

Alexander Shishkin <alexander.shishkin@linux.intel.com>
Alexei Starovoitov <ast@plumgrid.com>
Andy Lutomirski <luto@kernel.org>
Arto Bendiken <arto@bendiken.net>
Carlos O'Donell <carlos@redhat.com>
Casper Ti. Vector <caspervector@gmail.com>
Daniel Borkmann <daniel@iogearbox.net>
David Drysdale <drysdale@google.com>
Eric B Munson <emunson@akamai.com>
Florian Weimer <fweimer@redhat.com>
Gabriel F. T. Gomes <gftg@linux.vnet.ibm.com>
Heinrich Schuchardt <xypron.glpk@gmx.de>
Ingo Molnar <mingo@kernel.org>
Jakub Wilk <jwilk@jwilk.net>
Johannes Stüttgen <Johannes.Stuettgen@gmail.com>
Jonathan Wakely <jwakely@redhat.com>
Jonny Grant <jg@jguk.org>
Kees Cook <keescook@chromium.org>
Maria Guseva <m.guseva@samsung.com>
Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com>
Meikun Wang <alikewmk@gmail.com>
Michael Kerrisk <mtk.manpages@gmail.com>
Michal Hocko <mhocko@suse.com>
Mike Frysinger <vapier@gentoo.org>
Namhyung Kim <namhyung@gmail.com>
Nikola Forró <nforro@redhat.com>
Olivier TARTROU <olivier.tartrou@gmail.com>
Peter Hurley <peter@hurleysoftware.com>
Peter Zijlstra (Intel) <peterz@infradead.org>
Ross Zwisler <ross.zwisler@linux.intel.com>
Serge Hallyn <serge.hallyn@canonical.com>
Silvan Jegen <s.jegen@gmail.com>
Stefan Tauner <tauner@technikum-wien.at>
Steven Rostedt <rostedt@goodmis.org>
Tobias Stoeckmann <tobias@stoeckmann.org>
Tycho Andersen <tycho.andersen@canonical.com>
Ville Skyttä <ville.skytta@iki.fi>
Vince Weaver <vincent.weaver@maine.edu>
Zeng Linggang <zenglg.jy@cn.fujitsu.com>

Apologies if I missed anyone!


Newly documented interfaces in existing pages
---------------------------------------------

perf_event_open.2
    Vince Weaver
        4.1 adds AUX sample support
    Vince Weaver
        4.1 data_offset and data_size fields
    Vince Weaver  [Alexander Shishkin]
        Document aux_{head,tail,offset,size} support
    Vince Weaver
        4.0 update rdpmc documentation
    Vince Weaver
        4.1 adds PERF_RECORD_ITRACE_START
    Vince Weaver
        Document 4.1 clockid support
    Vince Weaver  [Steven Rostedt, Masami Hiramatsu]
        4.1 PERF_EVENT_IOC_SET_BPF support
    Vince Weaver
        4.1 adds AUX_FLAG_OVERWRITE support
    Vince Weaver
        4.1 PERF_SAMPLE_BRANCH_CALL_STACK
    Vince Weaver
        4.1 adds aux_watermark
    Vince Weaver
        Add possibility of EBUSY error

prctl.2
    Andy Lutomirski  [Kees Cook, Serge Hallyn]
        Document operations for ambient capabilities
    Michael Kerrisk
        Rework PR_CAP_AMBIENT text
        Note that arg4 and arg5 must be zero for CAP_AMBIENT
        RETURN VALUE: Add PR_CAP_AMBIENT + PR_CAP_AMBIENT_IS_SET case
        ERRORS: document PR_CAP_AMBIENT error cases

__ppc_set_ppr_med.3
    Gabriel F. T. Gomes
        Document PPC functions providing access to PPR
            GNU C Library commit 1747fcda4902a3b46183d93fb16ed9b436b2608b
            extends the priorities that can be set to the Program Priority
            Register (PPR), with the functions: __ppc_set_ppr_very_low(3)
            and __ppc_set_ppr_med_high(3).

capabilities.7
    Andy Lutomirski  [Kees Cook, Serge Hallyn]
        Document ambient capabilities
    Michael Kerrisk
        Various additions and reworkings for ambient capability text


New and changed links
---------------------

__ppc_set_ppr_med_high.3
    Gabriel F. T. Gomes
        New link to __ppc_set_ppr_med.3

__ppc_set_ppr_very_low.3
    Gabriel F. T. Gomes
        New link to __ppc_set_ppr_med.3


Changes to individual pages
---------------------------

mremap.2
    Eric B Munson  [Michal Hocko]
        Add note about mremap() with locked areas
            When mremap() is used to move or expand a mapping that is locked
            with mlock() or equivalent it will attempt to populate the new
            area.  However, like mmap(MAP_LOCKED), mremap() will not fail if
            the area cannot be populated.  Also like mmap(MAP_LOCKED) this
            might come as a surprise to users and should be noted.
open.2
    Michael Kerrisk  [David Drysdale]
        Remove accidental mention of O_TTY_INIT
            An earlier edit mentioned O_TTY_INIT as a file creation flag.
            That's true, according POSIX, but Linux does not implement
            this flag, so remove mention of it.

pipe.2
    Michael Kerrisk
        SEE ALSO: add splice(2)

prctl.2
    Michael Kerrisk
        Reorder options alphabetically
            Employ a pseudo-alphabetical order, ordering options after removal
            of any "PR_", "PR_SET_", or "PR_GET" prefix.
    Michael Kerrisk
        Fix alphabetical misplacements in ERRORS

ptrace.2
    Tycho Andersen
        Document PTRACE_O_SUSPEND_SECCOMP flag
    Michael Kerrisk
        Document /proc/sys/kernel/yama/ptrace_scope
    Michael Kerrisk
        Note that PTRACE_ATTACH cannot be applied to nondumpable processes
    Michael Kerrisk
        SEE ALSO: add prctl(2)

reboot.2
    Casper Ti. Vector
        1-argument reboot() is also provided by alternative libc

seccomp.2
    Michael Kerrisk
        Describe use of 'instruction_pointer' data field
    Michael Kerrisk  [Kees Cook]
        Note why all filters in a set are executed even after SECCOMP_RET_KILL

signalfd.2
    Michael Kerrisk
        Describe semantics with respect to SCM_RIGHTS

syscalls.2
    Michael Kerrisk
        Add mlock(2)
    Michael Kerrisk
        Add userfaultfd()

daemon.3
    Michael Kerrisk  [Johannes Stüttgen]
        Note that daemon() is buggy with respect to controlling tty acquisition

dirfd.3
    Jonathan Wakely
        Remove outdated NOTES
            As stated in the SYNOPSIS, since glibc 2.10 this function is also
            declared by the relevant X/Open and POSIX macros.

dlopen.3
    Michael Kerrisk
        Make it more explicit that LD_BIND_NOW overrides RTLD_LAZY
    Michael Kerrisk  [Florian Weimer]
        Correct the pathname used in EXAMPLE
            Quoting Florian:

                This does not work because libm.so can be a linker script:

                       handle = dlopen("libm.so", RTLD_LAZY);

                The proper way to do this is to include <gnu/lib-names.h>
                and use LIBM_SO.

            See https://bugzilla.kernel.org/show_bug.cgi?id=108821
    Michael Kerrisk
        Include a shell session showing build/run in EXAMPLE
    Michael Kerrisk
        Change arguments to main() to "void" in EXAMPLE

fgetgrent.3
    Zeng Linggang
        ATTRIBUTES: Note function that is not thread-safe

fgetpwent.3
    Zeng Linggang
        ATTRIBUTES: Note function that is not thread-safe

getauxval.3
    Michael Kerrisk
        Add some details for AT_SECURE

getspnam.3
    Zeng Linggang
        ATTRIBUTES: Note functions that are/aren't thread-safe

mallinfo.3
    Zeng Linggang
        ATTRIBUTES: Note function that is not thread-safe

mallopt.3
    Carlos O'Donell
        Document M_ARENA_TEST and M_ARENA_MAX

posix_fallocate.3
    Michael Kerrisk
        Clarify text relating to MT-safety
    Carlos O'Donell
        Mention glibc emulation caveats

termios.3
    Olivier TARTROU
        Add missing details on behaviour of PARMRK
            For a serial terminal, with a specific configuration, input bytes
            with value 0377 are passed to the program as two bytes, 0377 0377.

tty_ioctl.4
    Michael Kerrisk  [Peter Hurley]
        Note that TIOCTTYGSTRUCT went away in Linux 2.5.67

core.5
    Ross Zwisler
        Add info about DAX coredump filtering flags
            Kernel 4.4 added two new core dump filtering flags,
            MMF_DUMP_DAX_PRIVATE and MMF_DUMP_DAX_SHARED.

            These flags allow us to explicitly filter DAX mappings.
            This is desirable because DAX mappings, like hugetlb
            mappings, have the potential to be very large.

nsswitch.conf.5
    Nikola Forró
        Add list of files being read when "files" service is used
            This is not mentioned anywhere. Users can assume that the file
            being read is something like /etc/$DATABASE, but that's not
            always the case. It's better to explicitly specify which
            file is read for each respective database.  The list of
            files was acquired from glibc source code.

proc.5
    Heinrich Schuchardt  [Michael Kerrisk]
        Add details for threads-max
            Add detail information for threads-max.
            The checks for minimum and maximum values exist since kernel 4.1.
            https://lkml.org/lkml/2015/3/15/96
    Heinrich Schuchardt
        /proc/sys: Describe whitespace characters
    Michael Kerrisk
        Document 'CapAmb' in /proc/PID/status
    Michael Kerrisk
        Add reference to ptrace(2) for /proc/sys/kernel/yama/ptrace_scope

aio.7
    Michael Kerrisk  [Meikun Wang]
        Add missing include file, <fcntl.h>, to example program

mq_overview.7
    Michael Kerrisk  [Arto Bendiken]
        Document QSIZE bug that appeared in 3.5 and was fixed in 4.2

path_resolution.7
    Michael Kerrisk
        Clarify recursive resolution of symlinks and note limits

pipe.7
    Michael Kerrisk
        SEE ALSO: add splice(2)

rtld-audit.7
    Namhyung Kim
        Fix (typo) error in la_pltenter() description
            s/la_pltenter()/la_pltexit()/

            la_pltenter() is called regardless of the value of
            framesizep but la_pltexit() is called only if la_pltenter()
            returns with non-zero framesizep set.  I spent long time to
            figure out why la_pltexit() is not called at all.

signal.7
    Michael Kerrisk  [Michael Hocko]
        Note async-signal-safe functions added by POSIX.1-2008 TC1

tcp.7
    Daniel Borkmann  [Michael Kerrisk]
        Improve paragraphs on tcp_ecn and add tcp_ecn_fallback bullet
            Improve description of tcp_ecn, fix the RFC number and it's
            not a boolean anymore since long time, and add a description
            for tcp_ecn_fallback.

            See also kernel doc under Documentation/networking/ip-sysctl.txt
            on tcp_ecn and tcp_ecn_fallback.

ld.so.8
    Michael Kerrisk
        LD_POINTER_GUARD has been removed in glibc 2.23
    Michael Kerrisk
        Describe secure-execution mode
    Michael Kerrisk  [Maria Guseva]
        Replace mentions of set-UID/set-GID programs with secure-execution mode
            Inspired by a patch from Maria Guseva.
    Maria Guseva  [Silvan Jegen]
        LD_DEBUG is effective in secure-execution mode if /etc/suid-debug exists
